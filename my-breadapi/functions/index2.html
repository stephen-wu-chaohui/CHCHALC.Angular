<!DOCTYPE html>
<html>
<body>

<input type="file" onchange="uploadFile()" id="files" name="files[]" multiple />
<script>
		const functions = require('firebase-functions');
		const admin = require('firebase-admin');


		var serviceAccount = require("./chchalcKey.json");
		admin.initializeApp({
		  credential: admin.credential.cert(serviceAccount),
		  databaseURL: "https://chchalc.firebaseio.com"
		});
		const db = admin.firestore();
		const storage = admin.storage();


    //function to save file
    function uploadFile(){

      // Created a Storage Reference with root dir
      var storageRef = firebase.storage().ref();
      // Get the file from DOM
      var file = document.getElementById("files").files[0];
      console.log(file);

      //dynamically set reference to the file name
      var thisRef = storageRef.child(file.name);

      //put request upload file to firebase storage
      thisRef.put(file).then(function(snapshot) {
         alert("File Uploaded")
         console.log('Uploaded a blob or file!');
      });
    }

 </script>

<p>Use the ng-model directive to bind the value of the input field to a property made in the controller.</p>

</body>
</html>
